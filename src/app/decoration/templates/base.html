<!DOCTYPE html>
<html lang="en">
{% set userdb = ({"192.168.1.106" ~ "+" ~ "4c:cc:6a:ce:c0:8f":"Stefanos@Work"}) %}
{% set temp = userdb.update({"192.168.1.82" ~ "+" ~ "4c:cc:6a:ce:bf:6c":"Antonis@Work"}) %}
{% set IP_MAC = data['device']['IP'] ~ "+" ~ data['device']['Mac'] %}

{% if IP_MAC in userdb %}
    {% set guest_name = userdb[IP_MAC] %}
{% else %}
    {% set guest_name = "Unregistered Guest!" %}
{% endif %}

{% if data|length and data['query_params']['hotel']|length >= 2 %}
    {% set hotel = data['hotel'] %}
{% elif data['query_params']['hotel'] == "" %}
    {% set hotel = "" %}
{% else %}
    {% set temp = data.update({"hotel":""}) %}
    {% set hotel = "" %}
{% endif %}
    <div class="wrapper">
        {% block head %}
        {% endblock %}
        {% set Services = ["Room_Service", "Stuff", "Food"] %}
        {% if data|length and data['query_params']['hotel']|length >= 2 %}
            {% set hotel = data['query_params']['hotel'] %}
        {% elif data['query_params']['hotel'] == "" %}
        {% else %}
            {% set hotel = 'No hotel was selected' %}
        {% endif %}
    </div>
    <head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
        <link href="{{ url_for('static', path='{{ url_for('static', path='css/style.css') }}" rel="stylesheet">
        
        <!-- development version, includes helpful console warnings <script src="{{ url_for('static', path='js/vue.js') }}" type="application/javascript"></script>-->
        <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.19.0/axios.min.js"></script>
        
        
      
        

    </head>
    <body>
        <title>Plus Hotels - How can we help you?</title>
        <!-- Bootstrap Core CSS -->
        <link href="{{ url_for('static', path='{{ url_for('static', path='css/bootstrap.min.css') }}" rel="stylesheet">
        <link href="{{ url_for('static', path='{{ url_for('static', path='css/basicstyle.css') }}" rel="stylesheet">
        <nav class="navbar navbar-dark bg-dark">
        <a class="navbar-brand" href="/{{ url_for('Home') }}"><img width="100%" src="https://plushotels.gr/wp-content/uploads/2019/10/logo-small.png"></a>
             <!--
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
            </button>
            -->
        </nav>

        <header class="masthead">
          <div class="container h-100">
            <div class="row h-100 align-items-top" style="padding-top: 50px;">
              <div class="col-12">
                <div class="row justify-content-center">
                    <div class="col-12">
                        <div class="shadow-lg p-3 mb-5 bg-white rounded opacity-90">
                            <div style="position: absolute; top: 0; right: 10px; margin:10px;">    
                                <div class="alert alert-success" role="alert">
                                 Welcome {{guest_name}}!                             
                                </div>
                            </div>     
                            <div style="position: absolute; top: 0; left: 10px; margin:10px;" >
                             <a href="/#" data-toggle="tooltip" data-placement="top" title="You can rate our facilities , order a snack or report a problem to your room"><i class="material-icons"> info</i></a>                           
                            </div>
                            <div style="position: absolute; top:1px; margin-left:10px; ">
                                {% include 'activity' %}    
                            </div>
                            
                           
                            
                            <div class="row" style="padding-top: 60px;">
                                <div class="col text-center"><p class="lead">While relaxing at <strong>
                                {% if (hotel|length > 3) %}
                                        {{hotel[0]|upper}}{{hotel[1:]}} Hotel</strong>, you can also use our system
                                {% else %}
                                    <h1> NO HOTEL WAS SELECTED!!! </h1>
                                {% endif %}
                                </p>
                                </div>
                            </div>
                                                  
                           <div id="rating_vue" class="container">
  
                                <div class="tabs">
                                    <a v-on:click="activetab=1" v-bind:class="[ activetab === 1 ? 'active' : '' ]">Rating</a>
                                    <a v-on:click="activetab=2" v-bind:class="[ activetab === 2 ? 'active' : '' ]">Service</a>
                                    <a v-on:click="activetab=3" v-bind:class="[ activetab === 3 ? 'active' : '' ]">report</a>
                                    <a v-on:click="activetab=4" v-bind:class="[ activetab === 4 ? 'active' : '' ]">Rating 2</a>
                                </div>

                                <div class="content">
                                    <div style="width: 100%" v-if="activetab === 1" class="tabcontent">
                                        {% include 'rating' %}
                                    </div>
                                    <div v-if="activetab === 2" class="tabcontent">
                                        {% include 'report' %}
                                    </div>
                                    <div v-if="activetab === 3" class="tabcontent">
                                        Content for tab three
                                    </div>
                                    <div v-if="activetab === 4" class="tabcontent">
                                        Content for tab three
                                    </div>
                                </div>
                              
                            </div>                       
                        </div>
                    </div>
                </div>                    
                
              </div>
            </div>
          </div>
        </header>

        
        <div class="wrapper">
            {% block body %}
            {% endblock %}
        </div>

    <script type="application/javascript">
    // register modal component
    Vue.component('modal', {
      template: '#modal-template'
    })

    // start app
    new Vue({
      el: '#modalapp',
      data: {
        showModal: false
      }
    })
    myObject = new Vue
    (
        {
            el: '#rating_vue',
            delimiters: ['[[', ']]'],
            data() 
            {
                return {
                    {% for a_service in Services %}
                        picked_{{a_service}}: 'No Rating Yet.',
                    {% endfor %}
                    message: '',
                    hotel: '{{hotel}}',
                    activetab: 1
                }
            },
            methods:
            {
                fix_rating: function(){
                    {% for a_service in Services %}
                        if (parseInt(this.picked_{{a_service}}) <= 2)
                        {
                            console.log("this.picked_{{a_service}}", this.picked_{{a_service}});
                            this.picked_{{a_service}} = 5;
                            return this.picked_{{a_service}};
                        }
                    {% endfor %}
                },
                filter: function(){
                    console.log("HEEEEEEEEEEEERE #1");
                    let special_feature_keyword = 'τ ';
                    let message_lower = this.message.toLowerCase();
                    if (message_lower.startsWith(special_feature_keyword) == false)
                    {
                        switch(message_lower) {
                          case 'antonis':
                            this.message = 'Brother';
                            break;
                          case 'stefanos':
                            this.message = '∴';
                            break;
                          default:
                            this.message = this.message;
                        }
                    } 
                    else
                    {
                        let arg = this.message.slice(special_feature_keyword.length, this.message.length);
                        this.translate(arg);
                        //console.log("message after translation =", this.message);
                    }
                    this.message = this.message + '!'
                    return this.message;
                },
                translate: function (arg) {
                        console.log("HEEEEEEEEEEEERE #2");
                        let url = `https://translate.googleapis.com/translate_a/single?client=gtx&sl=el&tl=en&dt=t&q=`+arg;
                        axios.get(url)
                      .then(response => {
                        this.message = response.data[0][0][0];
                      })
                      .catch(e => {
                        this.errors.push(e);
                      })
                }
            }
        }
    )    
</script>
    
    </body>
</html>